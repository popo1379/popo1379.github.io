<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            开发实录：Android异步加载图片神器Universal-Image-Loader开源框架初次使用报告 | 
        
        LiBo&#39;s blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="前端时间写APP时候有一个要实现简单新闻功能的需求，其它都好说，到百度API商店找个免费的URL搞到APP里就OK，唯独这个新闻图片不好处理，因为要异步加载，还要涉及到图片尺寸大小等等各种设置，如果自己写代码对于我这个新手可能折腾两周也搞不出来，于是在学长的推荐下开始使用Universal-Image-Loader开源框架，因为只是简单的把图片显示出来，基本没难度，这次写出来，以后有需求再回来看看。一下是大牛们总结的特效：
1.多线程下载图片，图片可以来源于网络，文件系统，项目文件夹assets中以及drawable中等2.支持随意的配置ImageLoader，例如线程池，图片下载器，内存缓存策略，硬盘缓存策略，图片显示选项以及其他的一些配置3.支持图片的内存缓存，文件系统缓存或者SD卡缓存4.支持图片下载过程的监听5.根据控件(ImageView)的大小对Bitmap进行裁剪，减少Bitmap占用过多的内存6.较好的控制图片的加载过程，例如暂停图片加载，重新开始加载图片，一般使用在ListView,GridView中，滑动过程中暂停加载图片，停止滑动的时候去加载图片7.提供在较慢的网络下对图片进行加载">
    <meta name="keywords" content="null,android开发">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="LiBo&#39;s blog">
    <meta name="msapplication-starturl" content="https://popo1379.github.io/2016/11/16/2016-11-16/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="LiBo&#39;s blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://popo1379.github.io/2016/11/16/2016-11-16/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="开发实录：Android异步加载图片神器Universal-Image-Loader开源框架初次使用报告 | LiBo&#39;s blog">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="前端时间写APP时候有一个要实现简单新闻功能的需求，其它都好说，到百度API商店找个免费的URL搞到APP里就OK，唯独这个新闻图片不好处理，因为要异步加载，还要涉及到图片尺寸大小等等各种设置，如果自己写代码对于我这个新手可能折腾两周也搞不出来，于是在学长的推荐下开始使用Universal-Image-Loader开源框架，因为只是简单的把图片显示出来，基本没难度，这次写出来，以后有需求再回来看看。一下是大牛们总结的特效：
1.多线程下载图片，图片可以来源于网络，文件系统，项目文件夹assets中以及drawable中等2.支持随意的配置ImageLoader，例如线程池，图片下载器，内存缓存策略，硬盘缓存策略，图片显示选项以及其他的一些配置3.支持图片的内存缓存，文件系统缓存或者SD卡缓存4.支持图片下载过程的监听5.根据控件(ImageView)的大小对Bitmap进行裁剪，减少Bitmap占用过多的内存6.较好的控制图片的加载过程，例如暂停图片加载，重新开始加载图片，一般使用在ListView,GridView中，滑动过程中暂停加载图片，停止滑动的时候去加载图片7.提供在较慢的网络下对图片进行加载">
    <meta property="og:article:tag" content="android开发"> 

    
        <meta property="article:published_time" content="Wed Nov 16 2016 16:03:17 GMT+0800">
        <meta property="article:modified_time" content="Wed Nov 16 2016 20:31:47 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://popo1379.github.io/2016/11/16/2016-11-16/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://popo1379.github.io/2016/11/16/2016-11-16/index.html",
    "headline": "开发实录：Android异步加载图片神器Universal-Image-Loader开源框架初次使用报告",
    "datePublished": "Wed Nov 16 2016 16:03:17 GMT+0800",
    "dateModified": "Wed Nov 16 2016 20:31:47 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "popo1379",
        "image": {
            "@type": "ImageObject",
            "url": "http://oi1vkg8v3.bkt.clouddn.com/avatar2.jpg"
        },
        "description": "光阴交织 浮生若梦"
    },
    "publisher": {
        "@type": "Organization",
        "name": "LiBo&#39;s blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",android开发null",
    "description": "前端时间写APP时候有一个要实现简单新闻功能的需求，其它都好说，到百度API商店找个免费的URL搞到APP里就OK，唯独这个新闻图片不好处理，因为要异步加载，还要涉及到图片尺寸大小等等各种设置，如果自己写代码对于我这个新手可能折腾两周也搞不出来，于是在学长的推荐下开始使用Universal-Image-Loader开源框架，因为只是简单的把图片显示出来，基本没难度，这次写出来，以后有需求再回来看看。一下是大牛们总结的特效：
1.多线程下载图片，图片可以来源于网络，文件系统，项目文件夹assets中以及drawable中等2.支持随意的配置ImageLoader，例如线程池，图片下载器，内存缓存策略，硬盘缓存策略，图片显示选项以及其他的一些配置3.支持图片的内存缓存，文件系统缓存或者SD卡缓存4.支持图片下载过程的监听5.根据控件(ImageView)的大小对Bitmap进行裁剪，减少Bitmap占用过多的内存6.较好的控制图片的加载过程，例如暂停图片加载，重新开始加载图片，一般使用在ListView,GridView中，滑动过程中暂停加载图片，停止滑动的时候去加载图片7.提供在较慢的网络下对图片进行加载",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                开发实录：Android异步加载图片神器Universal-Image-Loader开源框架初次使用报告
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="http://oi1vkg8v3.bkt.clouddn.com/avatar2.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>popo1379</strong>
        <span>11月 16, 2016</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/android开发/">android开发</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=开发实录：Android异步加载图片神器Universal-Image-Loader开源框架初次使用报告&url=https://popo1379.github.io/2016/11/16/2016-11-16/index.html&pic=https://popo1379.github.io/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=开发实录：Android异步加载图片神器Universal-Image-Loader开源框架初次使用报告&url=https://popo1379.github.io/2016/11/16/2016-11-16/index.html&via=popo1379" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://popo1379.github.io/2016/11/16/2016-11-16/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://popo1379.github.io/2016/11/16/2016-11-16/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>前端时间写APP时候有一个要实现简单新闻功能的需求，其它都好说，到百度API商店找个免费的URL搞到APP里就OK，唯独这个新闻图片不好处理，因为要异步加载，还要涉及到图片尺寸大小等等<br>各种设置，如果自己写代码对于我这个新手可能折腾两周也搞不出来，于是在学长的推荐下开始使用Universal-Image-Loader开源框架，因为只是简单的把图片显示出来，基本没难度，这次写出<br>来，以后有需求再回来看看。<br>一下是大牛们总结的特效：</p>
<p>1.多线程下载图片，图片可以来源于网络，文件系统，项目文件夹assets中以及drawable中等<br>2.支持随意的配置ImageLoader，例如线程池，图片下载器，内存缓存策略，硬盘缓存策略，图片显示选项以及其他的一些配置<br>3.支持图片的内存缓存，文件系统缓存或者SD卡缓存<br>4.支持图片下载过程的监听<br>5.根据控件(ImageView)的大小对Bitmap进行裁剪，减少Bitmap占用过多的内存<br>6.较好的控制图片的加载过程，例如暂停图片加载，重新开始加载图片，一般使用在ListView,GridView中，滑动过程中暂停加载图片，停止滑动的时候去加载图片<br>7.提供在较慢的网络下对图片进行加载</p>
<a id="more"></a>
<p><img src="\Img\2016-11-16.png" alt="1"></p>
<p>准备工作：<br>1.下载Universal-Image-Loader，添加到libs目录下</p>
<ol>
<li>manifests添加下列代码：<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 写入扩展存储，向扩展卡写入数据，用于写入离线定位数据--&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>&gt;</span><span class="tag">&lt;/<span class="name">uses-permission</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 访问网络，网络定位需要上网--&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
</ol>
<p>OK，开始写代码了</p>
<p>首先新建MyApplication继承Application<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// TODO 您的其他初始化流程</span></div><div class="line">        initImageLoader(getApplicationContext());</div><div class="line">        <span class="keyword">super</span>.onCreate();</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">initImageLoader</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        ImageLoaderConfiguration config = <span class="keyword">new</span> ImageLoaderConfiguration</div><div class="line">                .Builder(context)</div><div class="line">                .memoryCacheExtraOptions(<span class="number">100</span>, <span class="number">100</span>) <span class="comment">// max width, max height，即保存的每个缓存文件的最大长宽</span></div><div class="line"></div><div class="line">                .threadPoolSize(<span class="number">5</span>)<span class="comment">//线程池内加载的数量</span></div><div class="line">                .threadPriority(Thread.NORM_PRIORITY - <span class="number">2</span>)</div><div class="line">                .denyCacheImageMultipleSizesInMemory()</div><div class="line">                .memoryCache(<span class="keyword">new</span> UsingFreqLimitedMemoryCache(<span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span>)) <span class="comment">// You can pass your own memory cache implementation/你可以通过自己的内存缓存实现</span></div><div class="line">                .memoryCacheSize(<span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span>)</div><div class="line">                .discCacheSize(<span class="number">50</span> * <span class="number">1024</span> * <span class="number">1024</span>)</div><div class="line">                .discCacheFileNameGenerator(<span class="keyword">new</span> Md5FileNameGenerator())<span class="comment">//将保存的时候的URI名称用MD5 加密</span></div><div class="line">                .tasksProcessingOrder(QueueProcessingType.LIFO)</div><div class="line">                .discCacheFileCount(<span class="number">100</span>) <span class="comment">//缓存的文件数</span></div><div class="line">                .defaultDisplayImageOptions(DisplayImageOptions.createSimple())</div><div class="line">                .imageDownloader(<span class="keyword">new</span> BaseImageDownloader(context, <span class="number">20</span>* <span class="number">1000</span>, <span class="number">60</span> * <span class="number">1000</span>)) <span class="comment">// connectTimeout (5 s), readTimeout (30 s)超时时间</span></div><div class="line">                .writeDebugLogs() <span class="comment">// Remove for release app</span></div><div class="line">                .build();<span class="comment">//开始构建</span></div><div class="line">        <span class="comment">// Initialize ImageLoader with configuration.</span></div><div class="line">        ImageLoader.getInstance().init(config);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在MyApplication中，我们可以进行框架的设置，我们在项目中不需要每一个都自己设置，一般使用createDefault()创建的ImageLoaderConfiguration就能使用，然后调用ImageLoader的init（）方法<br>将ImageLoaderConfiguration参数传递进去，ImageLoader使用单例模式。</p>
<p>下面，我们就可以在项目代码里使用框架咯</p>
<p>我们在准备好解析错误显示时的提示图片，图片所需的imageUrl和相关的控件后，开始设置options（DisplayImageOptions配置信息）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">options = <span class="keyword">new</span> DisplayImageOptions.Builder()</div><div class="line">                 .showImageOnLoading(R.drawable.newspic_loading) <span class="comment">// 设置图片下载期间显示的图片</span></div><div class="line">                 .showImageForEmptyUri(R.drawable.newspic_emptyuri) <span class="comment">// 设置图片Uri为空或是错误的时候显示的图片</span></div><div class="line">                 .showImageOnFail(R.drawable.newspic_fail) <span class="comment">// 设置图片加载或解码过程中发生错误显示的图片</span></div><div class="line">                 .cacheInMemory(<span class="keyword">true</span>) <span class="comment">// 设置下载的图片是否缓存在内存中</span></div><div class="line">                 .cacheOnDisk(<span class="keyword">true</span>) <span class="comment">// 设置下载的图片是否缓存在SD卡中</span></div><div class="line">                <span class="comment">// .displayer(new RoundedBitmapDisplayer(10)) // 设置成圆角图片</span></div><div class="line">                 .build(); <span class="comment">// 构建完成</span></div></pre></td></tr></table></figure>
<p>显示图片：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ImageLoader.getInstance().displayImage(uri, imageView, options);</div></pre></td></tr></table></figure>
<p>三个参数分别是图片URL地址，imageView控件，设置。</p>
<p>这样，我们就可以异步加载网络图片了。</p>
<p>项目代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme.AppBarOverlay"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/news_toolbar"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span></div><div class="line">            <span class="attr">app:popupTheme</span>=<span class="string">"@style/AppTheme.PopupOverlay"</span></div><div class="line">            /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">     <span class="tag">&lt;<span class="name">android.support.v4.widget.SwipeRefreshLayout</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/swipRefresh"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:padding</span>=<span class="string">"10dp"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/news_RV_list"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</div><div class="line"></div><div class="line">     <span class="tag">&lt;/<span class="name">android.support.v4.widget.SwipeRefreshLayout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.CardView</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"120dp"</span></div><div class="line">    <span class="attr">android:layout_marginBottom</span>=<span class="string">"2dp"</span></div><div class="line">    <span class="attr">android:layout_marginLeft</span>=<span class="string">"5dp"</span></div><div class="line">    <span class="attr">android:layout_marginRight</span>=<span class="string">"5dp"</span></div><div class="line">    <span class="attr">android:layout_marginTop</span>=<span class="string">"2dp"</span></div><div class="line">    <span class="attr">app:cardCornerRadius</span>=<span class="string">"5dp"</span></div><div class="line">    <span class="attr">app:elevation</span>=<span class="string">"1dp"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/news_swipe_item_container"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"174dp"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></div><div class="line">        <span class="attr">android:padding</span>=<span class="string">"5dp"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/news_swipe_item_title"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"104dp"</span></div><div class="line">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"left|center_vertical"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"21sp"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"center_vertical|right"</span> /&gt;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/news_swipe_item_icon"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"90dp"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"90dp"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">"center_vertical|right"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/news_title_time"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"2016_1_1"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"20dp"</span>/&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.v7.widget.CardView</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewsActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">   <span class="keyword">private</span> RecyclerView mRecyclerView;</div><div class="line">    <span class="keyword">private</span> List&lt;News&gt; mdatas=<span class="keyword">new</span> ArrayList&lt;News&gt;();</div><div class="line"><span class="keyword">private</span> String time_0,title_0,picUrl_0,url_0,time_1,title_1,picUrl_1,url_1,time_2,title_2,picUrl_2,url_2,time_3,title_3,picUrl_3,url_3,time_4,title_4,picUrl_4,url_4,time_5,title_5,picUrl_5,url_5,time_6,title_6,picUrl_6,url_6,time_7,title_7,picUrl_7,url_7;</div><div class="line"> <span class="keyword">private</span> SwipeRefreshLayout swipeRefreshLayout;</div><div class="line">    <span class="keyword">protected</span> ImageLoader imageLoader = ImageLoader.getInstance();</div><div class="line">    <span class="keyword">private</span> DisplayImageOptions options;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.news_layout);</div><div class="line">        initUI();</div><div class="line"></div><div class="line">        News new0=<span class="keyword">new</span> News(time_0,title_0,picUrl_0);</div><div class="line">        News new1=<span class="keyword">new</span> News(time_1,title_1,picUrl_1);</div><div class="line">        News new2=<span class="keyword">new</span> News(time_2,title_2,picUrl_2);</div><div class="line">        News new3=<span class="keyword">new</span> News(time_3,title_3,picUrl_3);</div><div class="line">        News new4=<span class="keyword">new</span> News(time_4,title_4,picUrl_5);</div><div class="line">        News new5=<span class="keyword">new</span> News(time_5,title_5,picUrl_5);</div><div class="line">        News new6=<span class="keyword">new</span> News(time_6,title_6,picUrl_6);</div><div class="line">        News new7=<span class="keyword">new</span> News(time_7,title_7,picUrl_7);</div><div class="line"></div><div class="line">        mdatas.add(new0);</div><div class="line">        mdatas.add(new1);</div><div class="line">        mdatas.add(new2);</div><div class="line">        mdatas.add(new3);</div><div class="line">        mdatas.add(new4);</div><div class="line">        mdatas.add(new5);</div><div class="line">        mdatas.add(new6);</div><div class="line">        mdatas.add(new7);</div><div class="line"></div><div class="line"></div><div class="line">        NewsAdapter mAdapter=<span class="keyword">new</span> NewsAdapter(NewsActivity.<span class="keyword">this</span>, mdatas);</div><div class="line">        mRecyclerView.setAdapter(mAdapter);</div><div class="line"></div><div class="line"></div><div class="line">        swipeRefreshLayout=(SwipeRefreshLayout)findViewById(R.id.swipRefresh);</div><div class="line">        <span class="comment">//改变加载显示的颜色</span></div><div class="line">        swipeRefreshLayout.setColorSchemeColors(R.color.swipe_color_1,R.color.swipe_color_2);</div><div class="line"></div><div class="line">        <span class="comment">//设置初始时的大小</span></div><div class="line">        swipeRefreshLayout.setSize(SwipeRefreshLayout.LARGE);</div><div class="line"></div><div class="line">        <span class="comment">//设置向下拉多少出现刷新</span></div><div class="line">        swipeRefreshLayout.setDistanceToTriggerSync(<span class="number">100</span>);</div><div class="line">        <span class="comment">//设置刷新出现的位置</span></div><div class="line">        swipeRefreshLayout.setProgressViewEndTarget(<span class="keyword">false</span>, <span class="number">200</span>);</div><div class="line"></div><div class="line">        <span class="comment">//设置监听</span></div><div class="line">        swipeRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> SwipeRefreshLayout.OnRefreshListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRefresh</span><span class="params">()</span> </span>&#123;</div><div class="line">                mdatas.clear();</div><div class="line"></div><div class="line">                News new0 = <span class="keyword">new</span> News(time_0, title_0, picUrl_0);</div><div class="line">                News new1 = <span class="keyword">new</span> News(time_1, title_1, picUrl_1);</div><div class="line">                News new2 = <span class="keyword">new</span> News(time_2, title_2, picUrl_2);</div><div class="line">                News new3 = <span class="keyword">new</span> News(time_3, title_3, picUrl_3);</div><div class="line">                News new4 = <span class="keyword">new</span> News(time_4, title_4, picUrl_5);</div><div class="line">                News new5 = <span class="keyword">new</span> News(time_5, title_5, picUrl_5);</div><div class="line">                News new6 = <span class="keyword">new</span> News(time_6, title_6, picUrl_6);</div><div class="line">                News new7 = <span class="keyword">new</span> News(time_7, title_7, picUrl_7);</div><div class="line"></div><div class="line">                mdatas.add(new0);</div><div class="line">                mdatas.add(new1);</div><div class="line">                mdatas.add(new2);</div><div class="line">                mdatas.add(new3);</div><div class="line">                mdatas.add(new4);</div><div class="line">                mdatas.add(new5);</div><div class="line">                mdatas.add(new6);</div><div class="line">                mdatas.add(new7);</div><div class="line"></div><div class="line"></div><div class="line">                swipeRefreshLayout.setRefreshing(<span class="keyword">false</span>);</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        <span class="comment">//Toolbar设置</span></div><div class="line">        android.support.v7.widget.Toolbar traffic_toolbar=(android.support.v7.widget.Toolbar) findViewById(R.id.news_toolbar);</div><div class="line">        traffic_toolbar.setTitle(<span class="string">"校园新闻(仅演示功能)"</span>);</div><div class="line">        <span class="comment">//  traffic_toolbar.setNavigationIcon(android.R.id.home);</span></div><div class="line">        setSupportActionBar(traffic_toolbar);</div><div class="line">        traffic_toolbar.setNavigationIcon(R.drawable.abc_ic_ab_back_mtrl_am_alpha);</div><div class="line">        traffic_toolbar.setNavigationOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123; <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span></span></div><div class="line">        &#123;   onBackPressed();</div><div class="line">        &#125; &#125;);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initUI</span><span class="params">()</span></span>&#123;</div><div class="line">    mRecyclerView=(RecyclerView)findViewById(R.id.news_RV_list);</div><div class="line">    mRecyclerView.setLayoutManager(<span class="keyword">new</span> LinearLayoutManager(<span class="keyword">this</span>));</div><div class="line"></div><div class="line"></div><div class="line">    apiTest();</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">apiTest</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">        Parameters para = <span class="keyword">new</span> Parameters();</div><div class="line">        para.put(<span class="string">"num"</span>, <span class="string">"10"</span>);</div><div class="line"></div><div class="line">        ApiStoreSDK.execute(<span class="string">"http://apis.baidu.com/txapi/social/social"</span>,</div><div class="line">                ApiStoreSDK.GET,</div><div class="line">                para,</div><div class="line">                <span class="keyword">new</span> ApiCallBack() &#123;</div><div class="line"></div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(<span class="keyword">int</span> status, String responseString)</span> </span>&#123;</div><div class="line">                        Log.i(<span class="string">"sdkdemo"</span>, <span class="string">"onSuccess"</span>);</div><div class="line">                        NewsUtility.handleNewsResponse(NewsActivity.<span class="keyword">this</span>,responseString);</div><div class="line"></div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">        showNews();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showNews</span><span class="params">()</span></span>&#123;</div><div class="line">    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(<span class="keyword">this</span>);</div><div class="line">    time_0=prefs.getString(<span class="string">"time_0"</span>,<span class="string">""</span>);</div><div class="line">    title_0=prefs.getString(<span class="string">"title_0"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_0=prefs.getString(<span class="string">"picUrl_0"</span>,<span class="string">""</span>);</div><div class="line">    url_0=prefs.getString(<span class="string">"url_0"</span>,<span class="string">""</span>);</div><div class="line"></div><div class="line">    time_1=prefs.getString(<span class="string">"time_1"</span>,<span class="string">""</span>);</div><div class="line">    title_1=prefs.getString(<span class="string">"title_1"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_1=prefs.getString(<span class="string">"picUrl_1"</span>,<span class="string">""</span>);</div><div class="line">    url_1=prefs.getString(<span class="string">"url_1"</span>,<span class="string">""</span>);</div><div class="line"></div><div class="line">    time_2=prefs.getString(<span class="string">"time_2"</span>,<span class="string">""</span>);</div><div class="line">    title_2=prefs.getString(<span class="string">"title_2"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_2=prefs.getString(<span class="string">"picUrl_2"</span>,<span class="string">""</span>);</div><div class="line">    url_2=prefs.getString(<span class="string">"url_2"</span>,<span class="string">""</span>);</div><div class="line"></div><div class="line">    time_3=prefs.getString(<span class="string">"time_3"</span>,<span class="string">""</span>);</div><div class="line">    title_3=prefs.getString(<span class="string">"title_3"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_3=prefs.getString(<span class="string">"picUrl_3"</span>,<span class="string">""</span>);</div><div class="line">    url_3=prefs.getString(<span class="string">"url_3"</span>,<span class="string">""</span>);</div><div class="line"></div><div class="line">    time_4=prefs.getString(<span class="string">"time_4"</span>,<span class="string">""</span>);</div><div class="line">    title_4=prefs.getString(<span class="string">"title_4"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_4=prefs.getString(<span class="string">"picUrl_4"</span>,<span class="string">""</span>);</div><div class="line">    url_4=prefs.getString(<span class="string">"url_4"</span>,<span class="string">""</span>);</div><div class="line"></div><div class="line">    time_5=prefs.getString(<span class="string">"time_5"</span>,<span class="string">""</span>);</div><div class="line">    title_5=prefs.getString(<span class="string">"title_5"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_5=prefs.getString(<span class="string">"picUrl_5"</span>,<span class="string">""</span>);</div><div class="line">    url_5=prefs.getString(<span class="string">"url_5"</span>,<span class="string">""</span>);</div><div class="line"></div><div class="line">    time_6=prefs.getString(<span class="string">"time_6"</span>,<span class="string">""</span>);</div><div class="line">    title_6=prefs.getString(<span class="string">"title_6"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_6=prefs.getString(<span class="string">"picUrl_6"</span>,<span class="string">""</span>);</div><div class="line">    url_6=prefs.getString(<span class="string">"url_6"</span>,<span class="string">""</span>);</div><div class="line"></div><div class="line">    time_7=prefs.getString(<span class="string">"time_7"</span>,<span class="string">""</span>);</div><div class="line">    title_7=prefs.getString(<span class="string">"title_7"</span>,<span class="string">""</span>);</div><div class="line">    picUrl_7=prefs.getString(<span class="string">"picUrl_7"</span>,<span class="string">""</span>);</div><div class="line">    url_7=prefs.getString(<span class="string">"url_7"</span>,<span class="string">""</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">News</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String news_title;</div><div class="line">    <span class="keyword">private</span> String news_pic;</div><div class="line">    <span class="keyword">private</span> String news_time;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">News</span><span class="params">(String time,String title,String pic)</span></span>&#123;</div><div class="line">    news_time=time;</div><div class="line">     news_title=title;</div><div class="line">        news_pic=pic;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNews_time</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> news_time;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> news_title;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNews_pic</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> news_pic;&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewsUtility</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">handleNewsResponse</span><span class="params">(Context context, String response)</span> </span>&#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            JSONObject jsonObject = <span class="keyword">new</span> JSONObject(response);</div><div class="line">            JSONArray jsonArray_newslist = jsonObject.getJSONArray(<span class="string">"newslist"</span>);</div><div class="line">            JSONObject jsonNews_0 = (JSONObject) jsonArray_newslist.get(<span class="number">0</span>);</div><div class="line">            String news_0_ctime = jsonNews_0.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_0_title = jsonNews_0.getString(<span class="string">"title"</span>);</div><div class="line">            String news_0_picUrl = jsonNews_0.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_0_Url = jsonNews_0.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line">            JSONObject jsonNews_1 = (JSONObject) jsonArray_newslist.get(<span class="number">1</span>);</div><div class="line">            String news_1_ctime = jsonNews_1.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_1_title = jsonNews_1.getString(<span class="string">"title"</span>);</div><div class="line">            String news_1_picUrl = jsonNews_1.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_1_Url = jsonNews_1.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line">            JSONObject jsonNews_2 = (JSONObject) jsonArray_newslist.get(<span class="number">2</span>);</div><div class="line">            String news_2_ctime = jsonNews_2.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_2_title = jsonNews_2.getString(<span class="string">"title"</span>);</div><div class="line">            String news_2_picUrl = jsonNews_2.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_2_Url = jsonNews_2.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line">            JSONObject jsonNews_3 = (JSONObject) jsonArray_newslist.get(<span class="number">3</span>);</div><div class="line">            String news_3_ctime = jsonNews_3.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_3_title = jsonNews_3.getString(<span class="string">"title"</span>);</div><div class="line">            String news_3_picUrl = jsonNews_3.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_3_Url = jsonNews_3.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line">            JSONObject jsonNews_4 = (JSONObject) jsonArray_newslist.get(<span class="number">4</span>);</div><div class="line">            String news_4_ctime = jsonNews_4.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_4_title = jsonNews_4.getString(<span class="string">"title"</span>);</div><div class="line">            String news_4_picUrl = jsonNews_4.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_4_Url = jsonNews_4.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line">            JSONObject jsonNews_5 = (JSONObject) jsonArray_newslist.get(<span class="number">5</span>);</div><div class="line">            String news_5_ctime = jsonNews_5.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_5_title = jsonNews_5.getString(<span class="string">"title"</span>);</div><div class="line">            String news_5_picUrl = jsonNews_5.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_5_Url = jsonNews_5.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line"></div><div class="line">            JSONObject jsonNews_6 = (JSONObject) jsonArray_newslist.get(<span class="number">6</span>);</div><div class="line">            String news_6_ctime = jsonNews_6.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_6_title = jsonNews_6.getString(<span class="string">"title"</span>);</div><div class="line">            String news_6_picUrl = jsonNews_6.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_6_Url = jsonNews_6.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line">            JSONObject jsonNews_7 = (JSONObject) jsonArray_newslist.get(<span class="number">7</span>);</div><div class="line">            String news_7_ctime = jsonNews_7.getString(<span class="string">"ctime"</span>);</div><div class="line">            String news_7_title = jsonNews_7.getString(<span class="string">"title"</span>);</div><div class="line">            String news_7_picUrl = jsonNews_7.getString(<span class="string">"picUrl"</span>);</div><div class="line">            String news_7_Url = jsonNews_7.getString(<span class="string">"url"</span>);</div><div class="line"></div><div class="line">            saveNewsinfo(context, news_0_ctime, news_0_title, news_0_picUrl, news_0_Url,</div><div class="line">                    news_1_ctime,news_1_title,news_1_picUrl,news_1_Url,</div><div class="line">                    news_2_ctime,news_2_title,news_2_picUrl,news_2_Url,</div><div class="line">                    news_3_ctime,news_3_title,news_3_picUrl,news_3_Url,</div><div class="line">                    news_4_ctime,news_4_title,news_4_picUrl,news_4_Url,</div><div class="line">                    news_5_ctime,news_5_title,news_5_picUrl,news_5_Url,</div><div class="line">                    news_6_ctime,news_6_title,news_6_picUrl,news_6_Url,</div><div class="line">                    news_7_ctime,news_7_title,news_7_picUrl,news_7_Url);</div><div class="line">        &#125; <span class="keyword">catch</span> (JSONException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">saveNewsinfo</span><span class="params">(Context context, String time_0, String title_0, String picUrl_0, String url_0,</span></span></div><div class="line">                                    String time_1, String title_1, String picUrl_1, String url_1,</div><div class="line">                                    String time_2, String title_2, String picUrl_2, String url_2,</div><div class="line">                                    String time_3, String title_3, String picUrl_3, String url_3,</div><div class="line">                                    String time_4, String title_4, String picUrl_4, String url_4,</div><div class="line">                                    String time_5, String title_5, String picUrl_5, String url_5,</div><div class="line">                                    String time_6, String title_6, String picUrl_6, String url_6,</div><div class="line">                                    String time_7, String title_7, String picUrl_7, String url_7) &#123;</div><div class="line">        SharedPreferences.Editor editor = PreferenceManager.getDefaultSharedPreferences(context).edit();</div><div class="line">editor.putString(<span class="string">"time_0"</span>,time_0);</div><div class="line">        editor.putString(<span class="string">"title_0"</span>,title_0);</div><div class="line">        editor.putString(<span class="string">"picUrl_0"</span>,picUrl_0);</div><div class="line">        editor.putString(<span class="string">"url_0"</span>,url_0);</div><div class="line"></div><div class="line">        editor.putString(<span class="string">"time_1"</span>,time_1);</div><div class="line">        editor.putString(<span class="string">"title_1"</span>,title_1);</div><div class="line">        editor.putString(<span class="string">"picUrl_1"</span>,picUrl_1);</div><div class="line">        editor.putString(<span class="string">"url_1"</span>,url_1);</div><div class="line"></div><div class="line">        editor.putString(<span class="string">"time_2"</span>,time_2);</div><div class="line">        editor.putString(<span class="string">"title_2"</span>,title_2);</div><div class="line">        editor.putString(<span class="string">"picUrl_2"</span>,picUrl_2);</div><div class="line">        editor.putString(<span class="string">"url_2"</span>,url_2);</div><div class="line"></div><div class="line">        editor.putString(<span class="string">"time_3"</span>,time_3);</div><div class="line">        editor.putString(<span class="string">"title_3"</span>,title_3);</div><div class="line">        editor.putString(<span class="string">"picUrl_3"</span>,picUrl_3);</div><div class="line">        editor.putString(<span class="string">"url_3"</span>,url_3);</div><div class="line"></div><div class="line">        editor.putString(<span class="string">"time_4"</span>,time_4);</div><div class="line">        editor.putString(<span class="string">"title_4"</span>,title_4);</div><div class="line">        editor.putString(<span class="string">"picUrl_4"</span>,picUrl_4);</div><div class="line">        editor.putString(<span class="string">"url_4"</span>,url_4);</div><div class="line"></div><div class="line">        editor.putString(<span class="string">"time_5"</span>,time_5);</div><div class="line">        editor.putString(<span class="string">"title_5"</span>,title_5);</div><div class="line">        editor.putString(<span class="string">"picUrl_5"</span>,picUrl_5);</div><div class="line">        editor.putString(<span class="string">"url_5"</span>,url_5);</div><div class="line"></div><div class="line">        editor.putString(<span class="string">"time_6"</span>,time_6);</div><div class="line">        editor.putString(<span class="string">"title_6"</span>,title_6);</div><div class="line">        editor.putString(<span class="string">"picUrl_6"</span>,picUrl_6);</div><div class="line">        editor.putString(<span class="string">"url_6"</span>,url_6);</div><div class="line"></div><div class="line">        editor.putString(<span class="string">"time_7"</span>,time_7);</div><div class="line">        editor.putString(<span class="string">"title_7"</span>,title_7);</div><div class="line">        editor.putString(<span class="string">"picUrl_7"</span>,picUrl_7);</div><div class="line">        editor.putString(<span class="string">"url_7"</span>,url_7);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">        editor.commit();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewsAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">NewsAdapter</span>.<span class="title">NormalItemHolder</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">protected</span> ImageLoader imageLoader = ImageLoader.getInstance();</div><div class="line">    <span class="keyword">private</span> DisplayImageOptions options;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Context mContext;</div><div class="line">    <span class="keyword">private</span> List&lt;News&gt; mDataList;</div><div class="line"> <span class="keyword">private</span> LayoutInflater mLayoutInflater;</div><div class="line">    <span class="keyword">private</span> News news;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NewsAdapter</span><span class="params">(Context mContext1, List&lt;News&gt; mDataList1)</span> </span>&#123;</div><div class="line">     mContext = mContext1;</div><div class="line">       mDataList = mDataList1;</div><div class="line">        mLayoutInflater = LayoutInflater.from(mContext);</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//这个方法主要生成为每个Item inflater出一个View，但是该方法返回的是一个ViewHolder。</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> NormalItemHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup viewGroup, <span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">        View view = mLayoutInflater.inflate(R.layout.news_item,viewGroup, <span class="keyword">false</span>);</div><div class="line">        NormalItemHolder holder= <span class="keyword">new</span> NormalItemHolder(view);</div><div class="line">        <span class="keyword">return</span> holder;</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 这个方法主要用于适配渲染数据到View中。</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(NormalItemHolder viewHolder,<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">       news= mDataList.get(position);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == news)</div><div class="line">            <span class="keyword">return</span>;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">            viewHolder.newsTime.setText(news.getNews_time());</div><div class="line">            viewHolder.newsTitle.setText(news.getTitle());</div><div class="line">            <span class="comment">// 使用DisplayImageOptions.Builder()创建DisplayImageOptions</span></div><div class="line">            options = <span class="keyword">new</span> DisplayImageOptions.Builder()</div><div class="line">                    .showImageOnLoading(R.drawable.newspic_loading) <span class="comment">// 设置图片下载期间显示的图片</span></div><div class="line">                    .showImageForEmptyUri(R.drawable.newspic_emptyuri) <span class="comment">// 设置图片Uri为空或是错误的时候显示的图片</span></div><div class="line">                    .showImageOnFail(R.drawable.newspic_fail) <span class="comment">// 设置图片加载或解码过程中发生错误显示的图片</span></div><div class="line">                    .cacheInMemory(<span class="keyword">true</span>) <span class="comment">// 设置下载的图片是否缓存在内存中</span></div><div class="line">                    .cacheOnDisk(<span class="keyword">true</span>) <span class="comment">// 设置下载的图片是否缓存在SD卡中</span></div><div class="line">                   <span class="comment">// .displayer(new RoundedBitmapDisplayer(10)) // 设置成圆角图片</span></div><div class="line">                    .build(); <span class="comment">// 构建完成</span></div><div class="line"></div><div class="line">            ImageLoader.getInstance().displayImage(news.getNews_pic(),viewHolder.newsIcon,options);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//得到所需Item数量</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">     <span class="keyword">return</span>  mDataList.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NormalItemHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line">        TextView newsTitle,newsTime;</div><div class="line">        ImageView newsIcon;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">NormalItemHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">            newsTime=(TextView)itemView.findViewById(R.id.news_title_time);</div><div class="line">            newsTitle = (TextView) itemView.findViewById(R.id.news_swipe_item_title);</div><div class="line">            newsIcon = (ImageView) itemView.findViewById(R.id.news_swipe_item_icon);</div><div class="line">            itemView.findViewById(R.id.news_swipe_item_container).setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line"></div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2016/11/23/2016-11-23/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/11/06/2016-11-6/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="http://oi1vkg8v3.bkt.clouddn.com/avatar2.jpg" alt="popo1379's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        461069752@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/02/">二月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/01/">一月 2018<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">4</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/gallery.html" title="相册">
                
                    <i class="material-icons sidebar-material-icons">photo</i>
                
                相册
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">27</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/popo1379" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    
        <a href="https://www.zhihu.com/people/r-b-89" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-zhihu">
                <span class="visuallyhidden">Zhihu</span>
            </button><!--
     --></a>
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2017&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>LiBo's blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
